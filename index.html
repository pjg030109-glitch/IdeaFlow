<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IdeaFlow - Seu Banco de Insights</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --danger: #ef4444;
            --edit: #f59e0b;
            --bg: #f1f5f9;
            --sidebar-bg: #ffffff;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --input-bg: #f8fafc;
        }

        [data-theme="dark"] {
            --bg: #0f172a;
            --sidebar-bg: #1e293b;
            --card-bg: #1e293b;
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
            --input-bg: #0f172a;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            min-height: 100vh;
            transition: background-color 0.3s;
        }

        .sidebar {
            width: 300px;
            background: var(--sidebar-bg);
            padding: 2rem;
            border-right: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            gap: 25px;
            position: sticky;
            top: 0;
            height: 100vh;
            box-sizing: border-box;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .header-sidebar { display: flex; justify-content: space-between; align-items: center; }
        .brand { font-size: 1.8rem; font-weight: 800; color: var(--primary); letter-spacing: -1px; }
        .theme-toggle { background: none; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; padding: 5px 8px; color: var(--text); }

        .main-content { flex: 1; padding: 2rem; max-width: 900px; margin: 0 auto; }

        h3 { margin: 0; font-size: 0.8rem; text-transform: uppercase; color: var(--text-muted); letter-spacing: 0.5px; }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: var(--input-bg);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid var(--border);
        }

        input, select {
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            outline: none;
            background: var(--card-bg);
            color: var(--text);
        }

        .btn-main { background-color: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; }

        .tag-filter { background: var(--input-bg); border: 1px solid var(--border); padding: 6px 12px; border-radius: 20px; font-size: 0.8rem; cursor: pointer; color: var(--text); }
        .tag-filter.active { background: var(--primary); color: white; }

        .idea-card {
            background: var(--card-bg);
            padding: 1.5rem;
            margin-bottom: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border);
        }

        .badges { display: flex; gap: 8px; margin-top: 8px; }
        .tag-badge { background: rgba(99, 102, 241, 0.1); color: var(--primary); padding: 3px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 600; }
        
        /* Cores de Status */
        .status-badge { padding: 3px 10px; border-radius: 6px; font-size: 0.7rem; font-weight: 600; }
        .status-pendente { background: #e2e8f0; color: #475569; }
        .status-andamento { background: #fef3c7; color: #92400e; }
        .status-concluida { background: #dcfce7; color: #166534; }

        .actions { display: flex; gap: 8px; }
        .btn-action { border: none; width: 35px; height: 35px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; color: white; }
        .btn-edit { background: var(--edit); }
        .btn-delete { background: var(--danger); }

        @media (max-width: 768px) { body { flex-direction: column; } .sidebar { width: 100%; height: auto; position: relative; } }
    </style>
</head>
<body>

    <aside class="sidebar">
        <div class="header-sidebar">
            <div class="brand">üåä IdeaFlow</div>
            <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">üåô</button>
        </div>
        
        <div class="search-box">
            <h3>Pesquisar</h3>
            <input type="text" id="searchInput" placeholder="O que voc√™ procura?" onkeyup="displayIdeas()">
        </div>

        <div>
            <h3>Filtrar por Tag</h3>
            <div id="filterTags" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
        </div>

        <div class="input-group">
            <h3>Nova Ideia</h3>
            <input type="hidden" id="editId">
            <input type="text" id="ideaInput" placeholder="T√≠tulo da ideia...">
            <input type="text" id="tagInput" placeholder="Tag...">
            <select id="statusInput">
                <option value="pendente">Pendente</option>
                <option value="andamento">Em Andamento</option>
                <option value="concluida">Conclu√≠da</option>
            </select>
            <button id="saveBtn" class="btn-main" onclick="saveIdea()">Salvar no Fluxo</button>
        </div>
    </aside>

    <main class="main-content">
        <div id="ideasList"></div>
    </main>

    <script>
        let selectedTag = null;

        document.addEventListener('DOMContentLoaded', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('themeBtn').innerText = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            displayIdeas();
        });

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            document.getElementById('themeBtn').innerText = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        function saveIdea() {
            const name = document.getElementById('ideaInput').value;
            const tag = document.getElementById('tagInput').value.trim();
            const status = document.getElementById('statusInput').value;
            const editId = document.getElementById('editId').value;

            if (!name || !tag) return alert("Preencha o nome e a tag.");

            let ideas = JSON.parse(localStorage.getItem('ideaflow_data') || '[]');

            if (editId) {
                ideas = ideas.map(item => item.id == editId ? { ...item, name, tag, status } : item);
                document.getElementById('editId').value = '';
                document.getElementById('saveBtn').innerText = 'Salvar no Fluxo';
            } else {
                ideas.push({ name, tag, status, id: Date.now() });
            }

            localStorage.setItem('ideaflow_data', JSON.stringify(ideas));
            resetForm();
            displayIdeas();
        }

        function deleteIdea(id) {
            if (confirm("Remover do fluxo?")) {
                let ideas = JSON.parse(localStorage.getItem('ideaflow_data') || '[]');
                ideas = ideas.filter(item => item.id !== id);
                localStorage.setItem('ideaflow_data', JSON.stringify(ideas));
                displayIdeas();
            }
        }

        function editIdea(id) {
            const ideas = JSON.parse(localStorage.getItem('ideaflow_data') || '[]');
            const idea = ideas.find(item => item.id === id);
            document.getElementById('ideaInput').value = idea.name;
            document.getElementById('tagInput').value = idea.tag;
            document.getElementById('statusInput').value = idea.status;
            document.getElementById('editId').value = idea.id;
            document.getElementById('saveBtn').innerText = 'Atualizar Ideia';
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function resetForm() {
            document.getElementById('ideaInput').value = '';
            document.getElementById('tagInput').value = '';
            document.getElementById('statusInput').value = 'pendente';
        }

        function toggleTagFilter(tag) {
            selectedTag = (selectedTag === tag) ? null : tag;
            displayIdeas();
        }

        function displayIdeas() {
            const list = document.getElementById('ideasList');
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            let ideas = JSON.parse(localStorage.getItem('ideaflow_data') || '[]');
            
            const filterContainer = document.getElementById('filterTags');
            const tags = [...new Set(ideas.map(i => i.tag))];
            filterContainer.innerHTML = tags.map(tag => `
                <button class="tag-filter ${selectedTag === tag ? 'active' : ''}" onclick="toggleTagFilter('${tag}')">${tag}</button>
            `).join('');

            let filtered = ideas.filter(idea => {
                const matchesSearch = idea.name.toLowerCase().includes(searchTerm);
                const matchesTag = selectedTag ? idea.tag === selectedTag : true;
                return matchesSearch && matchesTag;
            });

            list.innerHTML = filtered.sort((a,b) => b.id - a.id).map(idea => `
                <div class="idea-card">
                    <div>
                        <strong style="display:block;">${idea.name}</strong>
                        <div class="badges">
                            <span class="tag-badge">#${idea.tag}</span>
                            <span class="status-badge status-${idea.status}">${idea.status.replace('andamento', 'em andamento').toUpperCase()}</span>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn-action btn-edit" onclick="editIdea(${idea.id})">‚úèÔ∏è</button>
                        <button class="btn-action btn-delete" onclick="deleteIdea(${idea.id})">üóëÔ∏è</button>
                    </div>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
